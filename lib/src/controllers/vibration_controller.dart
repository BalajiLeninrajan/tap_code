import 'package:flutter/material.dart';
import 'package:vibration/vibration.dart';

class VibrationController extends ChangeNotifier {
  final Map<String, List<int>> _morseCodeMap = {
    'a': [500, 500, 1500, 1500],
    'b': [1500, 500, 500, 500, 500, 500, 500, 1500],
    'c': [1500, 500, 500, 500, 1500, 500, 500, 1500],
    'd': [1500, 500, 500, 500, 500, 1500],
    'e': [500, 1500],
    'f': [500, 500, 500, 500, 1500, 500, 500, 1500],
    'g': [1500, 500, 1500, 500, 500, 1500],
    'h': [500, 500, 500, 500, 500, 500, 500, 1500],
    'i': [500, 500, 500, 1500],
    'j': [500, 500, 1500, 500, 1500, 500, 1500, 1500],
    'k': [1500, 500, 500, 500, 1500, 1500],
    'l': [500, 500, 1500, 500, 500, 500, 500, 1500],
    'm': [1500, 500, 1500, 1500],
    'n': [1500, 500, 500, 1500],
    'o': [1500, 500, 1500, 500, 1500, 1500],
    'p': [500, 500, 1500, 500, 1500, 500, 500, 1500],
    'q': [1500, 500, 1500, 500, 500, 500, 1500, 1500],
    'r': [500, 500, 1500, 500, 500, 1500],
    's': [500, 500, 500, 500, 500, 1500],
    't': [1500, 1500],
    'u': [500, 500, 500, 500, 1500, 1500],
    'v': [500, 500, 500, 500, 500, 500, 1500, 1500],
    'w': [500, 500, 1500, 500, 1500, 1500],
    'x': [1500, 500, 500, 500, 500, 500, 1500, 1500],
    'y': [1500, 500, 500, 500, 1500, 500, 1500, 1500],
    'z': [1500, 500, 1500, 500, 500, 500, 500, 1500],
  };

  int vibrate(String text) {
    List<int> pattern = [0];
    text.split('').forEach((String ch) {
      if (ch == ' ') {
        pattern.removeLast();
        pattern.add(3500);
      } else {
        pattern += _morseCodeMap[ch]!;
      }
    });
    Vibration.vibrate(pattern: pattern);
    return pattern.reduce((int a, int b) => a + b);
  }
}
